CREATE TABLE AEROPUERTO(
codigo VARCHAR(10)NOT NULL,
nombre VARCHAR(30),
ciudad VARCHAR(30),
pais VARCHAR(30),
CONSTRAINT PK_AEROPUERTO PRIMARY KEY (codigo)
);

CREATE TABLE DIRECTOR(
dni VARCHAR(9)NOT NULL,
direccion VARCHAR(30),
pais VARCHAR(30),
telefono NUMERIC(9,0),
dni_controlado VARCHAR(9),
cod_aeropuerto VARCHAR(10),
CONSTRAINT PK_DIRECTOR PRIMARY KEY (dni),
CONSTRAINT UK_DIRECTOR UNIQUE (cod_aeropuerto),
CONSTRAINT FK_DIRECTORD FOREIGN KEY (dni_controlado) REFERENCES DIRECTOR(dni) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT FK_DIRECTORA FOREIGN KEY (cod_aeropuerto) REFERENCES AEROPUERTO(codigo) ON DELETE NO ACTION ON UPDATE CASCADE
);

CREATE TABLE AVION(
codigo VARCHAR(10) NOT NULL,
compañia VARCHAR(30),
modelo VARCHAR(30),
capacidad NUMERIC(3,0),
CONSTRAINT PK_AVION PRIMARY KEY (codigo)
);

CREATE TABLE PROGRAMA_VUELO(
num_vuelo NUMERIC(8,0) NOT NULL,
compañia VARCHAR(30),
dia NUMERIC(2,0),
cod_aero_despegar VARCHAR(10) NOT NULL,
cod_aero_aterrizar VARCHAR(10) NOT NULL,
CONSTRAINT PK_PROGRAMA_VUELO PRIMARY KEY (num_vuelo),
CONSTRAINT FK_PROGRAMA_VUELOD FOREIGN KEY (cod_aero_despegar) REFERENCES AEROPUERTO(codigo) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT FK_PROGRAMA_VUELOA FOREIGN KEY (cod_aero_aterrizar) REFERENCES AEROPUERTO(codigo) ON DELETE NO ACTION ON UPDATE CASCADE
);

CREATE TABLE VOLAR(
num_vuelo NUMERIC(8,0) NOT NULL,
cod_avion VARCHAR(30),
plazas_ocupadas NUMERIC(3,0),
CONSTRAINT PK_VOLAR PRIMARY KEY (num_vuelo, cod_avion, cod_aeropuerto),
CONSTRAINT FK_VOLAR1 FOREIGN KEY (num_vuelo) REFERENCES PROGRAMA_VUELO(num_vuelo) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT FK_VOLAR2 FOREIGN KEY (cod_avion) REFERENCES AVION(codigo) ON DELETE NO ACTION ON UPDATE CASCADE
);

CREATE TABLE PASAJEROS(
num_pasaporte NUMERIC(8,0) NOT NULL,
num_veces NUMERIC(2,0),
CONSTRAINT PK_PASAJEROS PRIMARY KEY (num_pasaporte),
CONSTRAINT FK_PASAJEROS FOREIGN KEY (num_pasaporte) REFERENCES PASAJE(num_pasaporte) ON DELETE NO ACTION ON UPDATE CASCADE
);

CREATE TABLE TRIPULACION(
num_pasaporte NUMERIC(8,0) NOT NULL,
anyos_experiencia NUMERIC(2,0),
CONSTRAINT PK_TRIPULACION PRIMARY KEY (num_pasaporte),
CONSTRAINT FK_TRIPULACION FOREIGN KEY (num_pasaporte) REFERENCES PASAJE(num_pasaporte) ON DELETE NO ACTION ON UPDATE CASCADE
);

CREATE TABLE ABORDO(
num_pasaporte NUMERIC(8,0) NOT NULL,
num_vuelo NUMERIC(2,0),
cod_avion VARCHAR(10),	
CONSTRAINT PK_ABORDO PRIMARY KEY (num_pasaporte, num_vuelo, cod_avion),
CONSTRAINT FK_ABORDO1 FOREIGN KEY (num_pasaporte) REFERENCES PASAJE(num_pasaporte) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT FK_ABORDO2 FOREIGN KEY (num_vuelo, cod_avion) REFERENCES VOLAR(num_vuelo, cod_avion) ON DELETE NO ACTION ON UPDATE CASCADE
);

CREATE TABLE SUBIR_BAJA_ESCALA(
num_pasaporte NUMERIC(8,0) NOT NULL,
num_vuelo NUMERIC(2,0),
cod_avion VARCHAR(10),
cod_aeropuerto VARCHAR(10),
CONSTRAINT PK_SUBIR_BAJA_ESCALA PRIMARY KEY (num_pasaporte, num_vuelo, cod_avion),
CONSTRAINT FK_SUBIR_BAJA_ESCALA1 FOREIGN KEY (num_pasaporte) REFERENCES PASAJEROS(num_pasaporte) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT FK_SUBIR_BAJA_ESCALA2 FOREIGN KEY (num_vuelo, cod_avion, cod_aeropuerto) REFERENCES TENER_ESCALA(num_vuelo, cod_avion, cod_aeropuerto) ON DELETE NO ACTION ON UPDATE CASCADE
);